version: "3.9"

services:
  front-end:
    build:
      context: ./front-end
      dockerfile: Dockerfile
    image: softy-pinko-front-end:task5
    expose: 
      - "9000"
    depends_on: 
      - back-end

  back-end:
    build:
      context: ./back-end
      dockerfile: Dockerfile
    image: softy-pinko-back-end:task5
    expose:
      - "5252"

  proxy:
    build:
      context: ./proxy
      dockerfile: Dockerfile
    image: softy-pinko-proxy:task5
    ports:
      - "80:80"
    depends_on: 
      - front-end
      - back-end


# Some notes on Docker Compose
# Having separate Docker images/containers per component of your application can reduce the complexity of your web apps. 
# That said, having more than a single Docker image that you need to spin up in containers can present challenges; what if you need to spin up 3 distinct Docker images, or 7, or 50? 
# Opening each one, one at a time would quickly become an issue. 
# Thatâ€™s where Docker Compose comes into play. With a docker-compose.yml file, we can specify the different components of your entire application, set up some basic configurations, and
#  allow Docker to handle spinning up the entire application all at once, no matter how many containers there are.
